<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setup and Details â€¢ rgee</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Setup and Details">
<meta property="og:description" content="">
<meta property="og:image" content="http://csaybar.github.io/rgee/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/setup.html">Setup</a>
    </li>
    <li>
      <a href="../articles/considerations.html">Consideration</a>
    </li>
    <li>
      <a href="http://csaybar.github.io/rgee-examples/">rgee examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/faq.html">
    <span class="fa fa-question-circle-o"></span>
     
    faq
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/csaybar/rgee/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Setup and Details</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/csaybar/rgee/blob/master/vignettes/setup.Rmd"><code>vignettes/setup.Rmd</code></a></small>
      <div class="hidden name"><code>setup.Rmd</code></div>

    </div>

    
    
<p><code>rgee</code> has two types of dependencies. The first group called <span style="color:#b52b09"><strong>strict dependencies</strong></span> that must be satisfied before the <code>rgee</code> installation. If this is not fulfilled <strong>rgee just will not work</strong>. The dependencies that comprised this group are:</p>
<ul>
<li><span style="color:#b52b09"><b> Google account with Earth Engine activated </b></span></li>
<li><span style="color:#b52b09"><b> Python &gt; v3.5 </b></span></li>
<li><span style="color:#b52b09"><b> EarthEngine Python API </b></span></li>
</ul>
<p>The activation of <strong>Earth Engine accounts</strong> depends on each users, check the oficial website of <a href="https://earthengine.google.com/">Google Earth Engine</a> for more details. If you do not count with a <strong>Python environment</strong> in your system, run <code><a href="../reference/ee_Initialize.html">ee_Initialize()</a></code> to display an interactive menu to install <a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a> (a free minimal installer for conda). We highly recommend use virtual environment to use <code>rgee</code>, you can create one using <code>ee_create_pyenv</code>. Finally, the <code><a href="../reference/ee_install_python_packages.html">ee_install_python_packages()</a></code> function is provided as a convenient way to install all Python packages needed in <code>rgee</code>, even though it is not mandatory. You can count on with your own custom installation. This would be also allowed. All the step described are summarised below:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(rgee)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co"># Recommended way to install external rgee dependencies </span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># 1. Initialize rgee with ee_Initialize(). If there is no any</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#    Python environment, miniconda will be installed by default.</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw"><a href="../reference/ee_Initialize.html">ee_Initialize</a></span>() <span class="co"># Probably you get an error do not worry!</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co"># 2. Create a Python environment, e.g. ee.</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="kw"><a href="../reference/ee_create_pyenv.html">ee_create_pyenv</a></span>(<span class="dt">env =</span> <span class="st">"ee"</span>)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10"></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co"># 3. Find all Python environments  in the system.</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="kw"><a href="../reference/ee_discover_pyenvs.html">ee_discover_pyenvs</a></span>()</a>
<a class="sourceLine" id="cb1-13" data-line-number="13"></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co"># 4. Set a Python environment (e.g. ee) and restart R to see changes. e.g</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="kw"><a href="../reference/ee_set_pyenv.html">ee_set_pyenv</a></span>(</a>
<a class="sourceLine" id="cb1-16" data-line-number="16">  <span class="dt">python_path =</span> <span class="st">'/home/MY_USER_HERE/.virtualenvs/ee/bin/python'</span>,</a>
<a class="sourceLine" id="cb1-17" data-line-number="17">  <span class="dt">python_env =</span> <span class="st">'ee'</span>,</a>
<a class="sourceLine" id="cb1-18" data-line-number="18">  <span class="dt">install =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19">)</a>
<a class="sourceLine" id="cb1-20" data-line-number="20"></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co"># 5. Install Python package dependencies</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="kw"><a href="../reference/ee_install_python_packages.html">ee_install_python_packages</a></span>()</a>
<a class="sourceLine" id="cb1-23" data-line-number="23"></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co"># 6. Initialize rgee again!</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="kw"><a href="../reference/ee_Initialize.html">ee_Initialize</a></span>()</a></code></pre></div>
<p>The second group of dependencies also called <span style="color:#ebcd26"><b>I/O dependencies</b></span> unlock <code>rgee</code> import &amp; export functions. This dependencies are not mandatory. However, many of the rgee I/O functionality depend on it. The dependencies that comprised this group are shown below:</p>
<ul>
<li><span style="color:#ebcd26"><strong>Google Cloud Storage credentials</strong></span></li>
<li><span style="color:#ebcd26"><strong>Google Drive credentials</strong></span></li>
</ul>
<div id="import-and-export-spatial-data-using-rgee" class="section level3">
<h3 class="hasAnchor">
<a href="#import-and-export-spatial-data-using-rgee" class="anchor"></a>Import and Export Spatial Data using rgee</h3>
<p>The batch import/export involves difficulties for most GEE users. In <code>rgee</code>, we are aware of it and we created several functions to help users to download and upload spatial data. If you are trying to <strong>download</strong> data from GEE using <code>rgee</code> you will have three options:</p>
<ul>
<li>
<strong>ee_as_sf</strong>: Useful to download ee<span class="math inline">\(Geometry, ee\)</span>Feature and ee$FeatureCollection.</li>
<li>
<strong>ee_as_stars</strong>: Convert ee$Image to stars object.</li>
<li>
<strong>ee_as_thumbnail</strong>: Create a stars object based on a thumbnail image.</li>
</ul>
<p>These functions through the argument <strong><code>via</code></strong> will permit you to <strong>change the download method</strong>. Thre are three methods to download in rgee: the <code>getinfo</code> which incrust the spatial object in the request, the <code>drive</code> options which use Google Drive (GD) as an container, and finally <code>gcs</code> which use Google Cloud Storage (GCS). <code>rgee</code> to deal with <strong>GD</strong> and <strong>GCS</strong> use the R package <a href="https://googledrive.tidyverse.org/">googledrive</a> and <a href="http://code.markedmondson.me/googleCloudStorageR/">googleCloudStorageR</a> respectively, so you will need to do the installation before.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># please try as follow</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">'googledrive'</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">'googleCloudStorageR'</span>)</a></code></pre></div>
<p><strong>GD</strong> is more friendly to novice Earth Engine users because the authentication process could be done without leaving R. However, if you are trying to move large amounts of data, it is preferable use Google Cloud Storage instead. It is important mentioning that, you will need to have your own Google Project with a credit card added to use GCS, charges will apply. See the <a href="http://code.markedmondson.me/googleCloudStorageR/articles/googleCloudStorageR.html">GCS_AUTH_FILE</a> tutorial to create your own service account key. If you want to understand why this is necessary, please have a look <a href="http://code.markedmondson.me/googleCloudStorageR/articles/googleCloudStorageR.html">Mark Edmondson</a> tutorial.</p>
<p>Batch <strong>upload</strong> is a harder process, in <code>rgee</code> we try to make it simple. If you want to upload files in a batch way, firstly you must <strong>get authorization to read &amp; write into a Google Cloud Storage (GCS) bucket</strong>. <code>rgee</code> implement two functions to upload files:</p>
<ul>
<li>
<strong>sf_as_ee</strong>: Convert a sfg, sfc or sf object to ee$FeatureCollection.</li>
<li>
<strong>stars_as_ee</strong>: Convert an stars object to ee$Image.</li>
</ul>
</div>
<div id="authorization-and-authentication" class="section level3">
<h3 class="hasAnchor">
<a href="#authorization-and-authentication" class="anchor"></a>Authorization and authentication</h3>
<p><code>rgee</code> deal with three different Google APIâ€™s:</p>
<ul>
<li>Google Earth Engine</li>
<li>Google Drive</li>
<li>Google Cloud Storage</li>
</ul>
<p>To authenticate either Google Drive or Google Cloud Storage, you just need to run as follow:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(rgee)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#ee_reattach() # reattach ee as a reserve word</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co"># Initialize just Earth Engine</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="kw"><a href="../reference/ee_Initialize.html">ee_Initialize</a></span>()</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="kw"><a href="../reference/ee_Initialize.html">ee_Initialize</a></span>(<span class="dt">email =</span> <span class="st">'csaybar@gmail.com'</span>) <span class="co"># Use the argument email is not mandatory</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co"># Initialize Earth Engine and GD</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="kw"><a href="../reference/ee_Initialize.html">ee_Initialize</a></span>(<span class="dt">email =</span> <span class="st">'csaybar@gmail.com'</span>, <span class="dt">drive =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co"># Initialize Earth Engine and GCS</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="kw"><a href="../reference/ee_Initialize.html">ee_Initialize</a></span>(<span class="dt">email =</span> <span class="st">'csaybar@gmail.com'</span>, <span class="dt">gcs =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co"># Initialize Earth Engine, GD and GCS</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw"><a href="../reference/ee_Initialize.html">ee_Initialize</a></span>(<span class="dt">email =</span> <span class="st">'csaybar@gmail.com'</span>, <span class="dt">drive =</span> <span class="ot">TRUE</span>, <span class="dt">gcs =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>If the Google account is verified and the permission is granted, you will be directed to an authentication token. Copy this token and paste it in the emerging GUI. This process will be repeated for each API, except for <a href="http://code.markedmondson.me/googleCloudStorageR/articles/googleCloudStorageR.html">Google Cloud Storage</a> see the link for details of how create a workflow that use GCS. If there is a successful outcome, all credentials are stored in:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/ee_get_earthengine_path.html">ee_get_earthengine_path</a></span>()</a></code></pre></div>
<p>For the next sessions, there will not be need for any further authentication.</p>
</div>
<div id="checking" class="section level3">
<h3 class="hasAnchor">
<a href="#checking" class="anchor"></a>Checking</h3>
<p>The <code><a href="../reference/ee_check-tools.html">ee_check()</a></code> function will help you for checking the sanity of <code>rgee</code> installation. Additionally, you can separately check the <code>rgee</code> dependencies with the following functions:</p>
<ul>
<li>
<code><a href="../reference/ee_check-tools.html">ee_check_python()</a></code> - Python version</li>
<li>
<code><a href="../reference/ee_check-tools.html">ee_check_credentials()</a></code> - Google Drive and GCS credentials</li>
<li>
<code><a href="../reference/ee_check-tools.html">ee_check_rgee_python_packages()</a></code> - R/Python packages</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(rgee)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="../reference/ee_check-tools.html">ee_check</a></span>()</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
